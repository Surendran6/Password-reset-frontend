(this["webpackJsonpreset_password-frontend"]=this["webpackJsonpreset_password-frontend"]||[]).push([[0],{220:function(e,t,a){},221:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(87),c=a.n(r),o=(a(97),a(7)),i=a(2),l=a(8),d=a.n(l),p=a(15),u=a(6),b=a(16),j=a.n(b),m=a(9),h=a(4),x=a(41),O=a(42),f=a(1);var g=function(e){return Object(f.jsx)("div",{style:{color:"rgb(255,0,0,0.8)",fontSize:"15px",paddingTop:"5px"},children:e.children})},w=["label","name"];var v=function(e){var t=e.label,a=e.name,s=Object(O.a)(e,w);return Object(f.jsxs)("div",{className:"mb-3 form-group",children:[Object(f.jsx)("label",{htmlFor:a,className:"text-info",children:t}),e.additional&&Object(f.jsx)(o.b,{to:"/forgotpassword",style:{color:"rgb(255,0,0,0.8)",float:"right",paddingTop:"5px",paddingBottom:"5px"},className:"small",children:"  Forgot Password?"}),Object(f.jsx)(m.b,Object(x.a)({className:"form-control",id:a,name:a},s)),Object(f.jsx)(m.a,{name:a,component:g})]})},y=["control"];var N=function(e){var t=e.control,a=Object(O.a)(e,y);switch(t){case"input":return Object(f.jsx)(v,Object(x.a)({},a))}};var k=function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(""),c=Object(u.a)(r,2),l=c[0],b=c[1],x=(Object(i.g)(),h.a({email:h.c().email("Enter valid email").required("Email is required")})),O=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var s,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.email,e.prev=1,e.next=4,j.a.post("https://password-reset--backend.herokuapp.com/api/auth/forgotpassword",{email:s});case 4:r=e.sent,b(r.data.success),n(r.data.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),b(e.t0.response.data.success),n(e.t0.response.data.error);case 13:a.resetForm();case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"card mx-auto",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title  text-center font-heading",children:"Forgot Password"}),Object(f.jsx)("p",{className:"".concat(l?"text-success":"text-danger"," small text-center"),children:a}),Object(f.jsx)(m.d,{initialValues:{email:""},validationSchema:x,onSubmit:O,children:function(e){return Object(f.jsxs)(m.c,{children:[Object(f.jsx)(N,{control:"input",type:"email",label:"Email",name:"email"}),Object(f.jsx)("button",{type:"submit",className:"my-4 btn btn-block btn-success",children:"Send Mail"})]})}}),Object(f.jsxs)("span",{className:"small",children:["Remember Password?",Object(f.jsx)(o.b,{to:"/login",style:{textDecoration:"none"},children:"    Login"})]})]})})};var S=function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(i.g)(),c=h.a({email:h.c().email("Enter valid email").required("Email is required"),password:h.c().required("Please Enter your password")}),l=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var s,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.email,c=t.password,e.prev=1,e.next=4,j.a.post("https://password-reset--backend.herokuapp.com/api/auth/login",{email:s,password:c});case 4:o=e.sent,console.log(o),localStorage.setItem("auth-token",o.data.token),r.push("/Authorized"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n(e.t0.response.data.error);case 13:a.resetForm();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"card align",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("p",{className:"text-danger text-center small",children:a}),Object(f.jsx)(m.d,{initialValues:{email:"",password:""},validationSchema:c,onSubmit:l,children:function(e){return Object(f.jsxs)(m.c,{children:[Object(f.jsx)(N,{control:"input",type:"email",placeholder:"Email",name:"email"}),Object(f.jsx)(N,{control:"input",type:"password",placeholder:"Password",name:"password",additional:"forgotpassword"}),Object(f.jsx)("button",{type:"submit",className:"my-4 btn btn-block btn-success",children:"Login"})]})}}),Object(f.jsxs)("span",{className:"small",children:["Don't have an account?",Object(f.jsx)(o.b,{to:"/register",style:{textDecoration:"none"},children:"    Register"})]})]})})},P=a(223);var C=function(){var e=Object(i.g)(),t=Object(s.useState)(!0),a=Object(u.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(!1),l=Object(u.a)(c,2),b=l[0],m=l[1];return Object(s.useEffect)((function(){var e=localStorage.getItem("auth-token");function t(){return(t=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get("https://password-reset--backend.herokuapp.com/api/private/Authorized",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 2:t.sent,r(!1),m(!0);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}null===e?r(!1):function(){t.apply(this,arguments)}()}),[]),Object(f.jsx)(f.Fragment,{children:n?Object(f.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{paddingTop:"150px",paddingBottom:"150px"},children:Object(f.jsx)(P.a,{})}):Object(f.jsx)(f.Fragment,{children:b?Object(f.jsxs)("div",{className:"protected-wrapper",children:[Object(f.jsxs)("h1",{className:"protected-access",children:["Congrats! You have successfully",Object(f.jsx)("br",{}),"logged in to protected route."]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{className:"btn btn-primary",onClick:function(){localStorage.removeItem("auth-token"),m(!1),e.push("/login")},children:"Logout"})})]}):Object(f.jsxs)("div",{className:"unauthorized-access",children:[Object(f.jsx)("p",{children:"You aren't authorized to access to page. Login to continue"}),Object(f.jsx)("button",{class:"btn btn-primary",children:Object(f.jsx)(o.b,{to:"/login",children:Object(f.jsx)("span",{style:{color:"white"},children:"Login"})})})]})})})};var E=function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(i.g)(),c=h.a({username:h.c().required("Name is mandatory").min(3,"Name must atleast contain 3 characters"),email:h.c().email("Enter valid email").required("Email is required"),password:h.c().required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{5,}$/,"Must Contain 5 Characters, One Uppercase, One Lowercase, One Number and one special case Character"),confirmpassword:h.c().oneOf([h.b("password"),null],"Passwords must match")}),l=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,s=t.email,c=t.password,e.prev=1,e.next=4,j.a.post("https://password-reset--backend.herokuapp.com/api/auth/register",{username:a,email:s,password:c});case 4:e.sent,r.push("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(e.t0.response.result.message||e.t0.response.result.error);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"card align",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title  text-center font-heading",children:"Register"}),Object(f.jsx)("p",{className:"text-danger",children:a}),Object(f.jsx)(m.d,{initialValues:{username:"",email:"",password:"",confirmpassword:""},validationSchema:c,onSubmit:l,children:function(e){return Object(f.jsxs)(m.c,{children:[Object(f.jsx)(N,{control:"input",type:"text",placeholder:"UserName",name:"username"}),Object(f.jsx)(N,{control:"input",type:"email",placeholder:"Email",name:"email"}),Object(f.jsx)(N,{control:"input",type:"password",placeholder:"Password",name:"password"}),Object(f.jsx)(N,{control:"input",type:"password",placeholder:"Confirm Password",name:"confirmpassword"}),Object(f.jsx)("button",{type:"submit",className:"my-4 btn btn-block btn-success",children:"Register"})]})}}),Object(f.jsxs)("span",{className:"small",children:["Already have an account?",Object(f.jsx)(o.b,{to:"/login",style:{textDecoration:"none"},children:"    Login"})]})]})})};var L=function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(""),c=Object(u.a)(r,2),l=c[0],b=c[1],x=(Object(i.g)(),Object(i.h)()),O=h.a({password:h.c().required("Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character"),confirmpassword:h.c().oneOf([h.b("password"),null],"Passwords must match")}),g=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var s,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.password,e.prev=1,e.next=4,j.a.put("https://password-reset--backend.herokuapp.com/api/auth/resetpassword/".concat(x.resetToken),{password:s});case 4:r=e.sent,b(r.data.success),n(r.data.data),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response.data.success,e.t0.response.data.data),b(e.t0.response.data.success),n(e.t0.response.data.data);case 14:a.resetForm();case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"card mx-auto",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title  text-center font-heading",children:"Reset Password"}),Object(f.jsx)("p",{className:"".concat(l?"text-success":"text-danger"," small text-center"),children:a}),Object(f.jsx)("span",{children:l?Object(f.jsx)(o.b,{to:"/login",class:"small text-center mb-4",children:"Login to Continue"}):""}),Object(f.jsx)(m.d,{initialValues:{password:"",confirmpassword:""},validationSchema:O,onSubmit:g,children:function(e){return Object(f.jsxs)(m.c,{children:[Object(f.jsx)(N,{control:"input",type:"password",label:"Password",name:"password"}),Object(f.jsx)(N,{control:"input",type:"password",label:"Confirm Password",name:"confirmpassword"}),Object(f.jsx)("button",{type:"submit",className:"my-4 btn btn-block btn-success",children:"Reset"})]})}}),Object(f.jsxs)("span",{className:"small",children:["Remember Password?",Object(f.jsx)(o.b,{to:"/login",style:{textDecoration:"none"},children:"    Login"})]})]})})};a(220);var F=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(o.a,{basename:"MERN-LoginSystem",children:Object(f.jsxs)(i.d,{children:[Object(f.jsx)(i.b,{path:"/Authorized",component:C}),Object(f.jsx)(i.b,{path:"/login",exact:!0,component:S}),Object(f.jsx)(i.b,{path:"/register",exact:!0,component:E}),Object(f.jsx)(i.b,{path:"/forgotpassword",exact:!0,component:k}),Object(f.jsx)(i.b,{path:"/resetpassword/:resetToken",exact:!0,component:L}),Object(f.jsx)(i.b,{to:"/",children:Object(f.jsx)(i.a,{to:"/login"})})]})})})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,224)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};c.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(F,{})}),document.getElementById("root")),z()},97:function(e,t,a){}},[[221,1,2]]]);
//# sourceMappingURL=main.9f201c1a.chunk.js.map